{% extends 'base.html' %}

{% block title %}Mobile Test - PaddySense{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-12">
        <div class="jumbotron bg-success text-white text-center">
            <h1 class="display-4">ðŸ“± Mobile Access Test</h1>
            <p class="lead">If you can see this page on your phone, mobile access is working!</p>
            <hr class="my-4">
            <p>Current time: <span id="current-time"></span></p>
            <p>Your IP: <strong>{{ request.META.REMOTE_ADDR }}</strong></p>
            <p>User Agent: <small>{{ request.META.HTTP_USER_AGENT|default:"Unknown" }}</small></p>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-6">
        <div class="card">
            <div class="card-header bg-primary text-white">
                <h5 class="card-title mb-0">âœ… Success Indicators</h5>
            </div>
            <div class="card-body">
                <ul class="list-group list-group-flush">
                    <li class="list-group-item">
                        <i class="fas fa-check-circle text-success"></i> 
                        Page loads without errors
                    </li>
                    <li class="list-group-item">
                        <i class="fas fa-check-circle text-success"></i> 
                        Navigation menu works
                    </li>
                    <li class="list-group-item">
                        <i class="fas fa-check-circle text-success"></i> 
                        All buttons are clickable
                    </li>
                    <li class="list-group-item">
                        <i class="fas fa-check-circle text-success"></i> 
                        Responsive design works
                    </li>
                </ul>
            </div>
        </div>
    </div>
    
    <div class="col-md-6">
        <div class="card">
            <div class="card-header bg-info text-white">
                <h5 class="card-title mb-0">ðŸ“± Mobile Features Test</h5>
            </div>
            <div class="card-body">
                <div class="text-center">
                    <button type="button" class="btn btn-success btn-lg mb-3" onclick="testTouch()">
                        <i class="fas fa-hand-pointer"></i> Test Touch
                    </button>
                    <div id="touch-result" class="alert alert-info" style="display: none;">
                        Touch event detected!
                    </div>
                </div>
                
                <div class="mt-3">
                    <h6>Test Results:</h6>
                    <ul class="list-unstyled">
                        <li><i class="fas fa-mobile-alt"></i> Screen Size: <span id="screen-size"></span></li>
                        <li><i class="fas fa-touch"></i> Touch Support: <span id="touch-support"></span></li>
                        <li><i class="fas fa-wifi"></i> Connection: <span id="connection-type"></span></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-md-12">
        <div class="card bg-light">
            <div class="card-body text-center">
                <h5 class="text-success">ðŸŽ‰ Mobile Access Status</h5>
                <p class="lead mb-0" id="status-message">Testing mobile access...</p>
                <div class="mt-3">
                    <a href="{% url 'main:home' %}" class="btn btn-primary btn-lg me-3">
                        <i class="fas fa-home"></i> Go to Home
                    </a>
                    <a href="{% url 'main:dashboard' %}" class="btn btn-success btn-lg">
                        <i class="fas fa-chart-line"></i> Go to Dashboard
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Update current time
    function updateTime() {
        const now = new Date();
        document.getElementById('current-time').textContent = now.toLocaleString();
    }
    updateTime();
    setInterval(updateTime, 1000);
    
    // Detect mobile features
    const screenSize = `${window.screen.width} x ${window.screen.height}`;
    const touchSupport = 'ontouchstart' in window ? 'Yes' : 'No';
    const connectionType = navigator.connection ? navigator.connection.effectiveType : 'Unknown';
    
    document.getElementById('screen-size').textContent = screenSize;
    document.getElementById('touch-support').textContent = touchSupport;
    document.getElementById('connection-type').textContent = connectionType;
    
    // Update status message
    const statusMessage = document.getElementById('status-message');
    if (window.innerWidth <= 768) {
        statusMessage.textContent = 'âœ… Mobile device detected! Access is working correctly.';
        statusMessage.className = 'lead mb-0 text-success';
    } else {
        statusMessage.textContent = 'ðŸ’» Desktop device detected. Test on your phone for mobile experience.';
        statusMessage.className = 'lead mb-0 text-info';
    }
});

function testTouch() {
    const result = document.getElementById('touch-result');
    result.style.display = 'block';
    setTimeout(() => {
        result.style.display = 'none';
    }, 2000);
}
</script>
{% endblock %}
